/**
 * 분석 엔진
 * - 16유형 MBTI 판별
 * - 4축 점수 계산 (E/I, S/N, T/F, J/P)
 * - 감정 DNA 산출
 * - 셀프 갭 분석
 */

const TYPE_INFO = {
  ENTJ: {
    name: '전략적 통솔자', emoji: '♟️', mbtiCode: 'ENTJ',
    cognitiveStack: 'Te-Ni-Se-Fi',
    population: '1.8%',
    famousExamples: ['스티브 잡스 (Steve Jobs)', '마거릿 대처 (Margaret Thatcher)', '이재용 (삼성전자 회장)', '셜록 홈즈 (Sherlock Holmes)'],
    desc: '타고난 리더, 비전을 현실로 만드는 사람',
    detail: '당신은 복잡한 상황에서도 냉정하게 판단을 내릴 수 있는 사람입니다. 주변 사람들이 혼란에 빠져 있을 때, 당신은 이미 머릿속에서 3가지 시나리오를 돌리고 있죠. 그런데 더 놀라운 건, 그 계산을 남들이 알아듣게 설명할 수 있다는 겁니다. 전략을 세우는 건 많은 사람이 하지만, 그걸 실행시키는 건 당신 같은 사람뿐입니다.\n\n당신의 주 기능인 외향 사고(Te)는 세상을 체계적으로 조직하고 효율적으로 만드는 데 탁월합니다. 여기에 보조 기능인 내향 직관(Ni)이 더해져, 미래를 내다보는 전략적 비전까지 갖추고 있죠. 이 조합이야말로 당신이 "타고난 리더"로 불리는 이유입니다.\n\n직장에서든 사적인 모임에서든, 당신은 자연스럽게 지휘자 역할을 맡게 됩니다. 누가 시킨 게 아니라, 누군가는 해야 하는 일을 당신이 가장 잘 해내기 때문이에요. 비효율적인 시스템을 보면 참을 수 없고, "이렇게 하면 더 나을 텐데"라는 생각이 자동으로 떠오릅니다.\n\n다만, 전체 인구의 약 1.8%만이 ENTJ인 만큼, 당신의 직설적인 소통 방식과 높은 기준이 때로는 주변 사람들에게 부담이 될 수 있어요. 감정의 영역에서도 "효율"을 추구하다 보면 놓치는 것들이 있습니다. 가끔은 비효율적이더라도 따뜻한 한마디가 팀을 더 강하게 만든다는 걸 기억해주세요.',
    strengths: ['결단력과 추진력이 뛰어남', '장기적 비전을 제시하고 실행함', '효율적으로 팀을 이끄는 리더십', '논리적이고 객관적인 의사결정 능력', '어떤 상황에서도 흔들리지 않는 자신감', '복잡한 문제를 구조화하여 해결하는 능력'],
    weaknesses: ['지나친 효율 추구로 감정을 놓칠 수 있음', '타인의 속도를 기다리기 어려움', '완벽주의가 자신을 지치게 할 수 있음', '직설적인 표현이 상대에게 상처가 될 수 있음', '통제할 수 없는 상황에서 스트레스를 심하게 받음', '자신의 감정적 필요를 무시하는 경향'],
    careers: ['CEO/경영자', '전략 컨설턴트', '프로젝트 매니저', '변호사'],
    loveStyle: '연애에서도 목표 지향적. 상대에게 솔직하고 직설적으로 표현하며, 함께 성장하는 관계를 추구합니다. 다만 가끔 "효율"보다 "비효율적인 다정함"이 필요할 때가 있어요.',
    funFact: '회의에서 조용히 듣고 있다가 마지막에 한마디로 결론 내는 타입. 주변에서 "너 없으면 이거 어떻게 했어?"라는 말 자주 듣습니다.',
    communicationStyle: '직설적이고 간결한 소통을 선호합니다. 돌려 말하는 것을 싫어하고, 핵심을 빠르게 전달하려 하죠. 회의에서는 결론부터 말하고, 감정보다는 데이터와 논리로 설득하는 타입입니다.',
    stressResponse: '스트레스를 받으면 더욱 통제적으로 변하고, 모든 것을 혼자 해결하려 합니다. 극심한 스트레스 상황에서는 열등 기능인 Fi가 폭발하며 갑자기 감정적으로 무너지기도 해요. 이럴 때는 신뢰하는 사람에게 솔직하게 도움을 요청하는 것이 중요합니다.',
    bestMatch: 'INFP 감성 몽상가 🌙',
    worstMatch: 'ESFP 흥의 화신 🎉'
  },
  ENTP: {
    name: '논쟁의 달인', emoji: '💡', mbtiCode: 'ENTP',
    cognitiveStack: 'Ne-Ti-Fe-Si',
    population: '3.2%',
    famousExamples: ['토마스 에디슨 (Thomas Edison)', '로버트 다우니 주르 (Robert Downey Jr.)', '유재석', '잭 스패로우 (Jack Sparrow)'],
    desc: '끝없는 아이디어와 논쟁을 즐기는 발명가',
    detail: '당신의 머릿속은 24시간 브레인스토밍 중입니다. "이거 이렇게 하면 안 돼?" 라는 질문이 당신의 에너지원이죠. 기존의 규칙이나 틀에 갇히는 걸 싫어하고, 항상 새로운 가능성을 탐색합니다. 토론에서는 일부러 반대편에 서서 논리를 시험하기도 하죠. 그게 재미있으니까요.\n\n주 기능인 외향 직관(Ne)은 세상의 모든 것에서 가능성과 연결고리를 발견합니다. 한 가지 주제에서 10가지 아이디어가 파생되고, 그 아이디어에서 또 다른 가능성이 보이죠. 여기에 보조 기능인 내향 사고(Ti)가 논리적 정합성을 검증하면서, 단순한 공상이 아닌 실현 가능한 혁신을 만들어냅니다.\n\n사회적으로 당신은 매력적인 대화 상대입니다. 위트 있고, 박학다식하며, 어떤 주제든 흥미로운 관점을 제시할 수 있어요. "악마의 변호사"를 자처하며 토론하는 걸 즐기지만, 그건 상대를 공격하려는 게 아니라 진실에 더 가까워지려는 당신만의 방법입니다.\n\n하지만 열등 기능인 Si가 약하기 때문에, 시작은 화려하지만 마무리가 약한 경향이 있어요. 새로운 것에 빠져드는 속도만큼 식는 속도도 빠르죠. 아이디어의 양보다 실행의 질에 집중하는 연습이 필요합니다.',
    strengths: ['창의적 문제 해결 능력', '빠른 상황 판단과 적응력', '지적 호기심이 무한함', '위트 있는 대화와 설득력', '다양한 분야에 대한 폭넓은 지식', '기존의 틀을 깨는 혁신적 사고'],
    weaknesses: ['시작은 잘하지만 마무리가 약할 수 있음', '논쟁 자체를 즐겨 상대를 지치게 할 수 있음', '루틴한 작업에 쉽게 지루해함', '세부 사항과 후속 조치를 놓치기 쉬움', '감정적 민감함을 간과할 수 있음', '결정을 미루고 가능성만 탐색하는 경향'],
    careers: ['기업가/스타트업', '마케팅 전략가', '변리사', '크리에이티브 디렉터'],
    loveStyle: '지적 자극이 있는 연애를 원합니다. 상대와 밤새 토론할 수 있으면 최고! 예측 가능한 관계보다 서로를 놀라게 하는 관계를 선호해요.',
    funFact: '"근데 반대로 생각해보면..." 이 말을 하루에 5번 이상 합니다. 주변에서 "너는 왜 항상 반대야?"라고 하지만, 반대하는 게 아니라 가능성을 탐색하는 거예요.',
    communicationStyle: '재치 있고 에너지 넘치는 대화를 즐깁니다. 상대의 말에서 빠르게 연결고리를 찾아 새로운 관점을 제시하죠. 때로는 토론 자체를 즐기며 일부러 도발적인 질문을 던지지만, 그건 순수한 지적 호기심에서 나오는 겁니다.',
    stressResponse: '스트레스를 받으면 평소의 유연함이 사라지고 세부 사항에 집착하기 시작합니다. 열등 기능인 Si가 발동하면 과거의 실패를 곱씹거나 건강 염려증에 빠질 수 있어요. 이럴 때는 새로운 환경에서 리프레시하는 것이 효과적입니다.',
    bestMatch: 'INFJ 선의의 옹호자 🔮',
    worstMatch: 'ISTJ 현실주의자 🏛️'
  },
  ENFJ: {
    name: '정의의 사도', emoji: '🌟', mbtiCode: 'ENFJ',
    cognitiveStack: 'Fe-Ni-Se-Ti',
    population: '2.5%',
    famousExamples: ['오바마 (Barack Obama)', '오프라 윈프리 (Oprah Winfrey)', '방시혁 (하이브 의장)', '마틴 루터 킹 (Martin Luther King Jr.)'],
    desc: '사람들을 이끌고 영감을 주는 카리스마',
    detail: '당신이 방에 들어가면 공기가 바뀝니다. 사람들의 잠재력을 알아보고, 그걸 끌어내는 데 천부적인 재능이 있죠. "너는 이것보다 더 할 수 있어"라는 말이 가장 자연스럽게 나오는 사람. 다른 사람의 성장이 곧 당신의 기쁨이에요.\n\n주 기능인 외향 감정(Fe)은 주변 사람들의 감정 상태를 실시간으로 읽고, 조화로운 분위기를 만들어냅니다. 보조 기능인 내향 직관(Ni)이 여기에 더해져, 단순히 "지금 기분이 어때?"를 넘어 "이 사람이 진짜 원하는 건 뭘까?"까지 꿰뚫어 볼 수 있죠.\n\n당신은 타고난 멘토이자 코치입니다. 상대가 스스로도 몰랐던 가능성을 발견해주고, 그걸 실현할 수 있도록 옆에서 응원하죠. 조직에서는 자연스럽게 팀의 정신적 지주 역할을 합니다. 갈등이 생기면 중재하고, 사기가 떨어지면 북돋우는 사람.\n\n하지만 주의해야 할 점이 있어요. 다른 사람의 행복에 너무 몰입한 나머지, 자기 자신을 돌보는 것을 잊기 쉽습니다. "나는 괜찮아"라고 말하면서 정작 본인은 전혀 괜찮지 않은 적, 한두 번이 아닐 거예요. 당신도 누군가에게 돌봄 받을 자격이 있습니다.',
    strengths: ['뛰어난 공감 능력과 소통력', '팀의 잠재력을 끌어내는 리더십', '갈등 조정과 화합에 탁월함', '영감을 주는 비전 제시 능력', '타인의 성장을 진심으로 돕는 헌신', '다양한 사람들과 깊은 관계를 구축하는 능력'],
    weaknesses: ['타인의 문제를 자기 것처럼 짊어짐', '거절하기 어려워 과부하 걸림', '자기 욕구를 뒤로 미루는 경향', '비판을 개인적으로 받아들이기 쉬움', '이상주의적 기대가 현실과 충돌할 수 있음', '타인의 인정과 감사에 지나치게 의존할 수 있음'],
    careers: ['교육자/교수', '상담사/코치', 'HR 매니저', 'NGO 리더'],
    loveStyle: '상대의 성장을 돕는 걸 사랑의 표현으로 여깁니다. 깊은 감정적 교류를 원하고, 관계에서도 "의미"를 중요시해요. 다만 자기 자신도 돌봐야 한다는 걸 잊지 마세요.',
    funFact: '친구들 사이에서 "인생 멘토" 역할. 모임에서 자연스럽게 중심이 되지만 본인은 "나 그냥 듣고 있었는데?"라고 합니다.',
    communicationStyle: '따뜻하면서도 설득력 있는 소통을 합니다. 상대의 눈을 보며 진심 어린 대화를 나누고, 말 한마디에도 상대를 배려하는 세심함이 묻어나죠. 그룹에서는 모든 사람의 의견이 들릴 수 있도록 분위기를 조율하는 역할을 합니다.',
    stressResponse: '스트레스를 받으면 과도하게 자기 비판적이 되고, "내가 부족해서 이런 일이 생긴 거야"라고 자책합니다. 극심한 스트레스에서는 열등 기능인 Ti가 발동하며 냉소적이고 비판적으로 변할 수 있어요. 혼자만의 시간을 확보하고 자기 감정을 먼저 돌보는 것이 회복의 열쇠입니다.',
    bestMatch: 'ISTP 만능 장인 🔧',
    worstMatch: 'INTP 논리학자 🔬'
  },
  ENFP: {
    name: '자유로운 영혼', emoji: '🦋', mbtiCode: 'ENFP',
    cognitiveStack: 'Ne-Fi-Te-Si',
    population: '8.1%',
    famousExamples: ['로빈 윌리엄스 (Robin Williams)', '아이유 (IU)', '월트 디즈니 (Walt Disney)', '앤 셜리 (빨간 머리 앤)'],
    desc: '열정과 상상력으로 세상을 밝히는 사람',
    detail: '당신에게는 이상한 능력이 있습니다. 편의점에서 삼각김밥 고른 이야기도 당신이 하면 넷플릭스 시리즈가 됩니다. 감정이 풍부하고, 사람 한 명 한 명에게 진심으로 관심을 가지죠. "가능성"이라는 단어가 당신에게는 마법 주문 같은 거예요.\n\n주 기능인 외향 직관(Ne)은 세상을 가능성의 바다로 봅니다. 모든 것에 연결고리가 보이고, 일상 속에서도 영감을 발견하죠. 보조 기능인 내향 감정(Fi)은 깊은 내면의 가치관을 형성하여, 단순한 호기심이 아닌 진정성 있는 열정으로 이어집니다.\n\n당신은 사람들 사이에서 빛나는 존재예요. 처음 만난 사람과도 5분 만에 친해질 수 있고, 상대방을 특별하게 느끼게 만드는 재능이 있습니다. "너 진짜 재밌다", "너랑 있으면 에너지가 충전돼"라는 말을 자주 듣죠.\n\n하지만 관심사가 폭풍처럼 몰아쳤다가 빠르게 식는 패턴이 반복될 수 있어요. 열등 기능인 Si의 영향으로 디테일한 마무리나 루틴 유지가 약점이 될 수 있습니다. 당신의 열정은 가장 큰 무기지만, 그 열정을 한 곳에 집중하는 법도 배워보세요.',
    strengths: ['놀라운 창의력과 상상력', '사람들과 빠르게 공감하는 능력', '새로운 것에 대한 열정과 에너지', '진정성 있는 소통과 깊은 공감', '변화와 도전을 두려워하지 않는 용기', '어떤 환경에서든 긍정적 에너지를 전파하는 능력'],
    weaknesses: ['관심사가 너무 자주 바뀔 수 있음', '감정 기복이 클 때가 있음', '현실적 디테일을 놓치기 쉬움', '과도한 이상주의로 실망하기 쉬움', '집중력을 오래 유지하기 어려움', '갈등을 회피하다 문제가 커질 수 있음'],
    careers: ['콘텐츠 크리에이터', '작가/예술가', 'UX 디자이너', '여행 기획자'],
    loveStyle: '연애할 때 올인하는 타입! 상대의 모든 것에 관심을 가지고, 서프라이즈를 좋아해요. 하지만 자유를 억압하는 관계는 숨이 막혀요.',
    funFact: '"아 그거 있잖아—" 로 시작하면 주변 사람들이 자세를 고쳐 앉습니다. 짧은 글에도 서사를 집어넣는 타고난 이야기꾼.',
    communicationStyle: '에너지 넘치고 감정 표현이 풍부한 소통을 합니다. 이야기할 때 표정, 제스처가 크고 비유와 은유를 자주 사용하죠. 상대방의 감정에 깊이 공감하면서도, 무거운 주제도 유쾌하게 풀어내는 재능이 있습니다.',
    stressResponse: '스트레스를 받으면 평소의 밝은 에너지가 사라지고 혼자 움츠러듭니다. 열등 기능인 Si가 발동하면 과거의 실수를 반복적으로 떠올리며 자책하거나, 신체 증상에 과도하게 집착할 수 있어요. 신뢰하는 사람과 대화하며 감정을 풀어내는 것이 가장 좋은 회복법입니다.',
    bestMatch: 'INTJ 전략가 🧠',
    worstMatch: 'ESTJ 엄격한 관리자 📋'
  },
  ESTJ: {
    name: '엄격한 관리자', emoji: '📋', mbtiCode: 'ESTJ',
    cognitiveStack: 'Te-Si-Ne-Fi',
    population: '8.7%',
    famousExamples: ['헨리 포드 (Henry Ford)', '박진영 (JYP)', '미셸 오바마 (Michelle Obama)', '허경영... 은 아니고 이순신 장군'],
    desc: '책임감 있는 체계적 실행가',
    detail: '당신은 "말보다 행동"을 신조로 삼는 사람입니다. 계획을 세우고, 실행하고, 결과를 만들어내는 과정이 당신의 에너지원이죠. 조직에서 당신이 맡으면 일이 돌아갑니다. "이렇게 하면 된다"를 보여주는 게 당신의 리더십 방식이에요.\n\n주 기능인 외향 사고(Te)와 보조 기능인 내향 감각(Si)의 조합은 "검증된 방법으로 확실하게 실행한다"는 당신의 강점을 만들어냅니다. 과거의 경험에서 배운 것을 체계적으로 정리하고, 그걸 바탕으로 현재의 문제를 효율적으로 해결하죠.\n\n사회의 기둥 같은 존재가 바로 ESTJ입니다. 규칙을 존중하고, 약속을 지키며, 맡은 바 책임을 다합니다. 팀에서는 명확한 목표와 구체적인 계획을 제시하고, 모든 구성원이 제 역할을 하도록 관리합니다. 당신이 없으면 조직이 돌아가지 않는다는 걸, 주변 사람들은 다 알고 있어요.\n\n하지만 당신의 높은 기준과 규칙 중시 성향이 때로는 "융통성 없다"는 인상을 줄 수 있습니다. 열등 기능인 Fi가 약하기 때문에, 감정적인 뉘앙스를 놓치거나 타인의 개인적 사정을 이해하기 어려울 수 있어요. 가끔은 "원칙"보다 "사람"이 먼저일 때도 있다는 걸 기억하면 좋겠습니다.',
    strengths: ['뛰어난 조직력과 실행력', '책임감이 강하고 신뢰할 수 있음', '명확한 의사결정 능력', '전통과 질서를 유지하는 안정감', '실용적이고 현실적인 문제 해결', '시간과 자원을 효율적으로 관리하는 능력'],
    weaknesses: ['유연성이 부족할 수 있음', '감정적 뉘앙스를 놓치기 쉬움', '자기 기준을 남에게 강요할 수 있음', '새로운 방식을 받아들이는 데 시간이 걸림', '타인의 감정보다 업무 효율을 우선시할 수 있음', '"내 방식이 맞다"는 확신이 지나칠 수 있음'],
    careers: ['프로젝트 매니저', '공무원/관리직', '군 장교', '회계사'],
    loveStyle: '행동으로 사랑을 보여주는 타입. 데이트 계획도 꼼꼼하게 짜고, 약속은 반드시 지킵니다. 상대에게도 같은 수준의 신뢰를 기대해요.',
    funFact: '그룹 여행에서 전체 일정표를 만들어 공유하는 사람. "몇 시에 어디서 만나?"를 가장 먼저 정하는 타입.',
    communicationStyle: '명확하고 직접적인 소통을 선호합니다. 사실과 구체적인 데이터를 중심으로 대화하며, 모호한 표현을 싫어하죠. 결론과 실행 방안을 중시하기 때문에, "그래서 어쩌자는 거야?"가 자주 나오는 타입입니다.',
    stressResponse: '스트레스를 받으면 더욱 완고해지고 규칙에 집착하게 됩니다. 주변 사람들에게 짜증을 내거나 비판적으로 변할 수 있어요. 극심한 스트레스 상황에서는 열등 기능인 Fi가 폭발하며 감정적으로 예민해지고, "아무도 나를 이해 못 해"라는 외로움에 빠질 수 있습니다.',
    bestMatch: 'ISFP 호기심 많은 예술가 🎨',
    worstMatch: 'ENFP 자유로운 영혼 🦋'
  },
  ESTP: {
    name: '타고난 모험가', emoji: '🏄', mbtiCode: 'ESTP',
    cognitiveStack: 'Se-Ti-Fe-Ni',
    population: '4.3%',
    famousExamples: ['도널드 트럼프 (Donald Trump)', '마동석', '마돈나 (Madonna)', '제임스 본드 (James Bond)'],
    desc: '지금 이 순간을 즐기는 행동파',
    detail: '다른 사람들이 PPT 만들고, 회의하고, 검토받는 동안 당신은 이미 프로토타입을 완성했습니다. "일단 해보고 고치자"가 당신의 인생 모토. 실패를 두려워하지 않는 게 아니라, 실패보다 "안 해본 것"을 더 두려워하는 거죠.\n\n주 기능인 외향 감각(Se)은 현재 이 순간에 완전히 몰입하게 해줍니다. 오감이 예민하고, 상황의 미세한 변화도 놓치지 않죠. 보조 기능인 내향 사고(Ti)는 그 감각 정보를 빠르게 분석하여 최적의 행동을 결정합니다. 그래서 위기 상황에서 당신만큼 빛나는 사람이 없어요.\n\n파티에서든, 직장에서든, 위기 상황에서든 당신은 항상 "지금, 여기"에 집중합니다. 이론보다 실전, 계획보다 실행을 중시하죠. 손으로 직접 해보면서 배우는 타입이고, 그래서 실전 경험이 누구보다 풍부합니다.\n\n하지만 열등 기능인 Ni가 약하기 때문에, 장기적인 결과를 예측하는 것이 어려울 수 있어요. "지금 재밌으니까"라는 이유로 중요한 미래를 저당 잡는 선택을 하지 않도록 주의가 필요합니다. 가끔은 한 발 물러서서 큰 그림을 보는 연습도 해보세요.',
    strengths: ['압도적인 실행력과 추진력', '위기 상황에서 빛나는 순발력', '현실 감각이 뛰어남', '뛰어난 관찰력과 상황 파악 능력', '어떤 환경에도 빠르게 적응하는 유연함', '사람들과 쉽게 어울리는 사교성'],
    weaknesses: ['장기 계획에 약할 수 있음', '결과를 기다리기 힘들어함', '깊은 감정적 대화를 피하는 경향', '충동적 결정으로 후회할 수 있음', '규칙과 구조를 답답해하는 경향', '인내심이 부족하여 포기가 빠를 수 있음'],
    careers: ['기업가/창업자', '응급의료인', '스포츠 선수/코치', '세일즈 전문가'],
    loveStyle: '연애도 모험처럼! 같이 새로운 걸 경험하는 게 최고의 데이트. 지루한 건 못 참지만, 진심으로 빠지면 누구보다 올인합니다.',
    funFact: '"이거 해볼까?" 라고 말한 지 5분 만에 이미 시작하고 있는 사람. 주변에서 "너 진짜 빠르다"라는 말을 인사처럼 듣습니다.',
    communicationStyle: '직설적이고 에너지 넘치는 소통 스타일입니다. 이론적인 이야기보다는 구체적인 경험담과 실제 사례를 통해 대화하죠. 유머 감각이 뛰어나고, 분위기를 살리는 한마디를 잘 던지는 타입입니다.',
    stressResponse: '스트레스를 받으면 더 무모한 행동에 빠지거나, 반대로 완전히 위축될 수 있습니다. 열등 기능인 Ni가 발동하면 미래에 대한 부정적 예감에 사로잡히거나, 음모론적 사고에 빠지기도 해요. 몸을 움직이는 활동이나 스포츠로 에너지를 발산하는 것이 가장 효과적인 해소법입니다.',
    bestMatch: 'ISFJ 조용한 수호자 🛡️',
    worstMatch: 'INFJ 선의의 옹호자 🔮'
  },
  ESFJ: {
    name: '따뜻한 돌봄이', emoji: '🤗', mbtiCode: 'ESFJ',
    cognitiveStack: 'Fe-Si-Ne-Ti',
    population: '12.3%',
    famousExamples: ['테일러 스위프트 (Taylor Swift)', '이영자', '앤드류 카네기 (Andrew Carnegie)', '모니카 겔러 (프렌즈)'],
    desc: '모두의 마음을 살피는 분위기 메이커',
    detail: '당신은 주변 사람들의 감정 상태를 실시간으로 스캔하는 능력자예요. 누가 기분이 안 좋은지, 누가 배고픈지, 누가 소외감을 느끼는지 — 다 감지합니다. 그리고 조용히 다가가서 "괜찮아?"라고 물어보죠. 당신 덕분에 유지되는 관계가 셀 수 없이 많을 거예요.\n\n주 기능인 외향 감정(Fe)은 집단의 정서적 조화를 유지하는 데 탁월합니다. 보조 기능인 내향 감각(Si)은 과거의 경험과 전통을 소중히 여기게 만들죠. 이 조합 덕분에 당신은 "누가 뭘 좋아하는지", "지난번에 뭐라고 했는지"를 정확하게 기억하고 챙겨줍니다.\n\n전체 인구의 약 12.3%를 차지하는 ESFJ는 사회의 접착제 같은 존재입니다. 가족 모임, 직장 회식, 친구 생일 — 이 모든 것이 원활하게 돌아가는 건 당신 같은 사람이 보이지 않는 곳에서 챙기고 있기 때문이에요.\n\n하지만 남들의 기분을 너무 잘 읽다 보니, 자기 감정은 뒷전이 되기 쉽습니다. "다들 좋으면 됐지"라는 마음으로 자기 욕구를 계속 미루면, 어느 순간 폭발할 수 있어요. 열등 기능인 Ti가 약하기 때문에, 감정에 휩쓸리지 않고 객관적으로 판단하는 연습도 필요합니다.',
    strengths: ['뛰어난 배려심과 공감 능력', '조화로운 분위기를 만드는 능력', '성실하고 책임감 있는 태도', '세심한 관찰력으로 상대의 필요를 미리 파악', '강한 소속감과 충성심', '실용적이고 따뜻한 리더십'],
    weaknesses: ['남의 평가에 민감할 수 있음', '갈등을 피하려다 본심을 숨김', '자기 희생이 과해질 수 있음', '변화나 새로운 방식에 저항감을 느낄 수 있음', '비판을 개인적 거부로 받아들이기 쉬움', '자신의 가치관을 타인에게 투영할 수 있음'],
    careers: ['간호사/의료인', '교사', '이벤트 플래너', '고객서비스 전문가'],
    loveStyle: '연인에게 헌신적이고 세심합니다. 기념일을 절대 잊지 않고, 상대의 작은 변화도 알아차려요. 하지만 "해주는 만큼 받고 싶다"는 마음을 숨기지 마세요.',
    funFact: '단체 카톡에서 "다들 뭐 먹을래?"를 먼저 물어보는 사람. 생일 챙기기 담당. 모임 끝나고 "다들 잘 들어갔어?"를 꼭 확인.',
    communicationStyle: '따뜻하고 배려 깊은 소통을 합니다. 상대의 기분을 먼저 살피고, 대화 중에도 모두가 편안하게 참여할 수 있도록 신경 씁니다. 구체적인 경험과 사례를 통해 이야기하며, 감사와 칭찬의 말을 자주 건네는 타입이에요.',
    stressResponse: '스트레스를 받으면 과도하게 남의 눈치를 보거나, 반대로 평소답지 않게 냉소적이고 비판적으로 변합니다. 열등 기능인 Ti가 부정적으로 발동하면 "다 내 잘못이야" 혹은 "아무도 나를 진심으로 생각하지 않아"라는 극단적 사고에 빠질 수 있어요. 신뢰하는 사람과 진솔하게 대화하는 것이 회복에 도움이 됩니다.',
    bestMatch: 'ISTP 만능 장인 🔧',
    worstMatch: 'ENTP 논쟁의 달인 💡'
  },
  ESFP: {
    name: '흥의 화신', emoji: '🎉', mbtiCode: 'ESFP',
    cognitiveStack: 'Se-Fi-Te-Ni',
    population: '8.5%',
    famousExamples: ['마릴린 먼로 (Marilyn Monroe)', '싸이 (PSY)', '엘튼 존 (Elton John)', '호머 심슨 (Homer Simpson)'],
    desc: '에너지 넘치는 엔터테이너',
    detail: '당신이 있으면 어떤 모임이든 축제가 됩니다. 타고난 엔터테이너이자 분위기 메이커. 사람들의 웃음과 즐거움이 당신의 연료예요. "인생은 한 번뿐이니까"가 당신의 진심이고, 그래서 매 순간을 최대한 즐깁니다.\n\n주 기능인 외향 감각(Se)은 현재의 경험을 최대한 풍부하게 느끼게 해줍니다. 색, 소리, 맛, 촉감 — 모든 감각이 살아있죠. 보조 기능인 내향 감정(Fi)은 깊은 내면의 가치관을 형성하여, 단순한 쾌락 추구가 아닌 진심 어린 즐거움을 추구하게 만듭니다.\n\n당신은 "분위기"라는 걸 만들어내는 마법사예요. 어색한 첫 만남도, 지루한 회식도, 당신이 있으면 완전히 다른 자리가 됩니다. 사람들이 당신 옆에 있고 싶어 하는 이유는, 당신과 함께하면 인생이 더 재밌어지기 때문이에요.\n\n다만 열등 기능인 Ni가 약하기 때문에, 미래를 내다보는 장기적 사고가 어려울 수 있습니다. "지금 당장 재밌는 것"에 빠져서 중요한 것들을 미루다 보면, 나중에 한꺼번에 몰아치는 현실 앞에서 당황할 수 있어요. 즐기면서도 내일을 준비하는 균형이 필요합니다.',
    strengths: ['뛰어난 사교성과 유머 감각', '현재에 충실하고 즐거움을 줌', '적응력이 뛰어남', '타고난 엔터테인먼트 능력', '실용적인 감각과 손재주', '어떤 사람과도 빠르게 친해지는 능력'],
    weaknesses: ['장기 계획을 세우기 어려움', '지루한 걸 못 참아 중요한 것도 건너뜀', '즉흥적 결정이 후회로 이어질 수 있음', '비판이나 부정적 피드백에 예민함', '갈등 상황을 회피하는 경향', '미래의 결과보다 현재의 즐거움을 우선시함'],
    careers: ['공연 예술가', 'MC/쇼호스트', '여행 가이드', 'SNS 인플루언서'],
    loveStyle: '연애는 재밌어야 해요! 서프라이즈, 즉흥 여행, 새로운 맛집 — 매일이 새로운 데이트. 진심이 아닌 건 바로 티가 나고, 진심이면 세상에서 제일 따뜻해요.',
    funFact: '카톡에서 이모티콘 사용량 상위 1%. "ㅋㅋㅋ" 한 번 보낸 적이 없고 항상 "ㅋㅋㅋㅋㅋㅋㅋ" 이상.',
    communicationStyle: '밝고 활기찬 대화를 즐깁니다. 이야기에 몸짓과 표정이 풍부하게 동반되고, 재미있는 에피소드를 들려주는 데 천부적인 재능이 있죠. 진지한 대화보다는 가볍고 즐거운 분위기의 소통을 선호하지만, 진심을 담으면 누구보다 감동적인 말을 할 수 있습니다.',
    stressResponse: '스트레스를 받으면 더 자극적인 활동에 몰두하거나, 충동적인 소비와 행동으로 현실 도피를 시도합니다. 극심한 스트레스에서는 열등 기능인 Ni가 발동하며 미래에 대한 비관적 시나리오에 사로잡히기도 해요. 즐기는 활동을 하되 신뢰하는 사람과 솔직한 대화를 나누는 것이 중요합니다.',
    bestMatch: 'ISTJ 현실주의자 🏛️',
    worstMatch: 'ENTJ 전략적 통솔자 ♟️'
  },
  INTJ: {
    name: '전략가', emoji: '🧠', mbtiCode: 'INTJ',
    cognitiveStack: 'Ni-Te-Fi-Se',
    population: '2.1%',
    famousExamples: ['일론 머스크 (Elon Musk)', '크리스토퍼 놀란 (Christopher Nolan)', '이세돌 (바둑기사)', '간달프 (반지의 제왕)'],
    desc: '독립적 사고의 마스터플래너',
    detail: '당신은 말 수가 적지만, 그 적은 말 한마디에 무게가 실리는 사람입니다. 모임에서 한 시간 동안 조용히 듣다가 "근데 그거 이렇게 하면 안 돼?"라고 한마디 하면 모두가 고개를 끄덕이죠. 당신의 침묵은 무관심이 아니라, 가장 효율적인 답을 찾는 과정입니다.\n\n주 기능인 내향 직관(Ni)은 패턴을 인식하고 미래를 예측하는 데 탁월합니다. 복잡한 정보들 속에서 핵심을 꿰뚫어보고, 남들이 보지 못하는 연결고리를 발견하죠. 보조 기능인 외향 사고(Te)가 이 통찰을 체계적인 계획으로 전환시킵니다.\n\n당신은 지적 독립성을 매우 중요시합니다. 권위에 복종하는 것보다 스스로 검증하고 납득한 것만 받아들이죠. "남들이 다 그렇게 하니까"라는 말은 당신에게 전혀 설득력이 없습니다. 대신 논리와 증거로 보여주면, 기꺼이 자기 생각도 바꿀 줄 아는 유연함이 있어요.\n\n하지만 전체 인구의 2.1%에 불과한 INTJ는 때로 주변 사람들에게 "차갑다"거나 "거만하다"는 오해를 받을 수 있습니다. 열등 기능인 Se가 약하기 때문에, 현실의 감각적 즐거움이나 사회적 상호작용을 간과하기 쉬워요. 가끔은 분석을 멈추고 순간을 즐기는 연습도 필요합니다.',
    strengths: ['전략적 사고와 계획 수립 능력', '독립적이고 자율적인 실행력', '복잡한 시스템을 꿰뚫어 보는 눈', '높은 자기 동기부여와 결단력', '지속적으로 자기 발전을 추구하는 자세', '비효율을 빠르게 찾아내고 개선하는 능력'],
    weaknesses: ['감정 표현이 서투를 수 있음', '지나친 완벽주의 경향', '타인의 비효율을 참기 어려움', '사교적 상황에서 에너지 소모가 큼', '자신의 방식에 대한 고집이 셀 수 있음', '감정적 지지보다 해결책을 제시하려 함'],
    careers: ['데이터 과학자', '건축가/설계사', '연구원', '투자 전략가'],
    loveStyle: '연애에서도 깊이를 추구합니다. 쓸데없는 썸은 싫고, 한 번 마음을 정하면 진심. 지적으로 대등한 상대에게 끌리고, 서로의 독립성을 존중하는 관계를 원해요.',
    funFact: '카톡 단체방에서 읽씹이 가장 많지만, 정작 중요한 순간에 핵심 한줄을 남기는 사람.',
    communicationStyle: '간결하고 핵심적인 소통을 선호합니다. 쓸데없는 수다나 잡담보다는 의미 있는 대화를 원하죠. 아이디어를 논리적으로 구조화해서 전달하며, "왜?"라는 질문에 명확하게 답할 수 있을 때 가장 자신감 있게 말합니다.',
    stressResponse: '스트레스를 받으면 더욱 내면으로 철수하고 고립됩니다. 극심한 스트레스에서는 열등 기능인 Se가 발동하며 과식, 과음, 충동 구매 같은 감각적 과잉 행동에 빠지기도 해요. 혼자만의 공간에서 생각을 정리하되, 완전히 고립되지 않도록 신뢰하는 한두 명과 연결을 유지하는 것이 중요합니다.',
    bestMatch: 'ENFP 자유로운 영혼 🦋',
    worstMatch: 'ESFP 흥의 화신 🎉'
  },
  INTP: {
    name: '논리학자', emoji: '🔬', mbtiCode: 'INTP',
    cognitiveStack: 'Ti-Ne-Si-Fe',
    population: '3.3%',
    famousExamples: ['아인슈타인 (Albert Einstein)', '빌 게이츠 (Bill Gates)', '나영석 PD', '엘 로슨 (셜록/BBC)'],
    desc: '진리를 탐구하는 조용한 천재',
    detail: '당신의 머릿속은 영원히 꺼지지 않는 연구실입니다. "왜?"라는 질문이 끊이지 않고, 하나의 답을 찾으면 그 답에서 또 새로운 질문이 생기죠. 남들이 당연하게 받아들이는 것을 당신은 의심하고, 그 의심이 결국 통찰로 이어집니다.\n\n주 기능인 내향 사고(Ti)는 내면에 정교한 논리 체계를 구축합니다. 모든 개념을 분해하고 재조립하며, 모순이 없는 완벽한 이해를 추구하죠. 보조 기능인 외향 직관(Ne)이 여기에 다양한 가능성과 아이디어를 공급합니다. 이 조합이 당신을 "조용한 천재"로 만드는 비결이에요.\n\n당신은 지적 정직성을 최고의 가치로 여깁니다. "모른다"라고 말할 수 있는 용기, 틀렸음을 인정하고 다시 생각할 수 있는 유연함 — 이게 진짜 지성입니다. 당신은 지식을 뽐내기 위해서가 아니라, 세상을 더 정확하게 이해하기 위해 탐구하죠.\n\n하지만 열등 기능인 Fe가 약하기 때문에, 사회적 상황에서 어색함을 느끼거나 타인의 감정에 둔감할 수 있어요. "그건 논리적으로 맞지 않아"라는 말이 상대에게는 상처가 될 수 있다는 걸 기억해주세요. 생각의 세계와 사람의 세계 사이의 균형을 찾는 것이 당신의 과제입니다.',
    strengths: ['뛰어난 분석력과 논리력', '독창적인 관점과 아이디어', '복잡한 개념을 이해하는 능력', '지적 정직성과 객관적 사고', '패턴을 인식하고 시스템을 이해하는 능력', '어떤 주제든 깊이 있게 탐구하는 집중력'],
    weaknesses: ['실행보다 생각에 머무르는 경향', '사회적 상황이 에너지를 소모시킴', '감정을 무시하거나 간과할 수 있음', '완벽한 이해가 될 때까지 행동을 미루는 경향', '일상적 관리(청소, 정리 등)에 무관심함', '타인의 감정적 필요에 둔감할 수 있음'],
    careers: ['소프트웨어 개발자', '연구 과학자', '철학자', '시스템 분석가'],
    loveStyle: '마음을 여는 데 시간이 걸리지만, 한 번 열리면 깊이가 다릅니다. 지적 교감이 감정적 교감만큼 중요해요. 서로의 혼자만의 시간을 존중하는 관계가 이상적.',
    funFact: '위키피디아 서핑 시작하면 3시간이 순삭. 대화 중 갑자기 "근데 이거 원리가 뭐지?"라며 검색하는 사람.',
    communicationStyle: '정확하고 논리적인 소통을 추구합니다. 말수가 적지만 한마디 한마디에 깊은 생각이 담겨 있죠. 추상적이고 복잡한 개념을 설명하는 데 능하지만, 일상적인 스몰톡은 어색해합니다. "정확히 말하면..."이라는 수정을 자주 합니다.',
    stressResponse: '스트레스를 받으면 더 깊이 내면으로 후퇴하고 세상과 단절됩니다. 열등 기능인 Fe가 부정적으로 발동하면 "아무도 나를 이해 못 해"라는 외로움에 빠지거나, 갑자기 타인의 평가에 예민해지기도 해요. 익숙한 환경에서 좋아하는 활동에 몰입하는 것이 회복에 도움이 됩니다.',
    bestMatch: 'ENFJ 정의의 사도 🌟',
    worstMatch: 'ESFJ 따뜻한 돌봄이 🤗'
  },
  INFJ: {
    name: '선의의 옹호자', emoji: '🔮', mbtiCode: 'INFJ',
    cognitiveStack: 'Ni-Fe-Ti-Se',
    population: '1.5%',
    famousExamples: ['마틴 루터 킹 (Martin Luther King Jr.)', 'BTS RM (김남준)', '니콜 키드먼 (Nicole Kidman)', '알버스 덤블도어 (해리 포터)'],
    desc: '이상을 현실로 만드는 신비로운 직관러',
    detail: '당신은 인간 CCTV입니다. 모임에서 누가 불편해하는지, 누가 진심이 아닌지 — 다 보입니다. 그런데 그걸 대놓고 말하지 않죠. 필요한 순간이 올 때까지 조용히 저장해두다가, 딱 그 순간에 핵심을 찌릅니다. 주변에서 "너 프로파일러야?" 소리 들어봤을 거예요.\n\n전체 인구의 약 1.5%로 가장 희귀한 MBTI 유형인 INFJ. 주 기능인 내향 직관(Ni)은 표면 아래의 의미와 패턴을 읽어내는 데 탁월합니다. 보조 기능인 외향 감정(Fe)이 여기에 깊은 공감 능력을 더해, 사람들의 진짜 감정과 숨겨진 동기까지 꿰뚫어 보죠.\n\n당신은 조용하지만 강한 신념의 소유자입니다. 불의를 보면 참지 못하고, 세상을 더 나은 곳으로 만들고 싶다는 이상을 진심으로 품고 있어요. 겉으로는 온화하지만, 가치관에 어긋나는 일에는 절대 타협하지 않는 강철 같은 면이 있습니다.\n\n하지만 세상을 너무 깊이 느끼는 만큼, 쉽게 지치기도 합니다. 열등 기능인 Se가 약하기 때문에, 현실의 감각적 세계를 놓치거나 몸의 신호를 무시할 수 있어요. "모든 것을 분석해야 한다"는 강박에서 벗어나, 가끔은 아무 생각 없이 현재를 즐기는 연습도 필요합니다.',
    strengths: ['깊은 직관력과 통찰력', '이상을 위해 꾸준히 노력함', '타인의 감정을 깊이 이해함', '강한 내면의 가치관과 신념', '창의적 비전을 구체적으로 실현하는 능력', '의미 있는 깊은 관계를 구축하는 능력'],
    weaknesses: ['이상과 현실의 갭에 좌절할 수 있음', '자기 감정을 너무 억누르는 경향', '완벽한 관계를 기대해 실망하기 쉬움', '과도한 공감으로 감정적 번아웃 위험', '비판에 깊이 상처받을 수 있음', '"도어슬램" — 한계를 넘기면 관계를 완전히 끊는 경향'],
    careers: ['심리상담사', '작가/시나리오작가', '비영리단체 활동가', 'UX 리서처'],
    loveStyle: '소울메이트를 찾는 타입. 표면적인 관계는 원하지 않고, 영혼까지 교감하는 깊은 연결을 원합니다. 그래서 연애 시작이 느릴 수 있지만, 한번 시작하면 진심 그 자체.',
    funFact: '사람들의 표정 변화, 말투 변화를 무의식적으로 캐치합니다. "너 오늘 뭔가 있지?"를 상대방이 말하기 전에 먼저 물어보는 타입.',
    communicationStyle: '조용하지만 깊이 있는 소통을 합니다. 대화 주제가 피상적이면 금방 흥미를 잃지만, 의미 있는 주제에는 열정적으로 참여하죠. 은유와 비유를 자주 사용하며, 상대의 말 뒤에 숨겨진 진짜 의미를 읽으려 합니다.',
    stressResponse: '스트레스를 받으면 극도로 내면에 침잠하고 세상과의 연결을 끊습니다. 열등 기능인 Se가 부정적으로 발동하면 과식, 과음, 충동 구매 등 감각적 과잉 행동에 빠지기도 해요. 극심한 스트레스 시 유명한 "INFJ 도어슬램" — 관계를 완전히 차단하는 행동이 나타날 수 있습니다.',
    bestMatch: 'ENTP 논쟁의 달인 💡',
    worstMatch: 'ESTP 타고난 모험가 🏄'
  },
  INFP: {
    name: '감성 몽상가', emoji: '🌙', mbtiCode: 'INFP',
    cognitiveStack: 'Fi-Ne-Si-Te',
    population: '4.4%',
    famousExamples: ['셰익스피어 (William Shakespeare)', 'BTS 뷔 (김태형)', 'J.R.R. 톨킨 (J.R.R. Tolkien)', '아멜리에 풀랭 (아멜리에)'],
    desc: '내면 세계가 풍부한 이상주의자',
    detail: '당신의 머릿속에는 작은 우주가 있습니다. 버스 창밖을 보면서 단편 소설 한 편을 구상하고, 비 오는 날에는 왠지 모를 아련함에 빠지죠. 남들이 그냥 지나치는 순간들에서 당신은 의미를 발견합니다. "별거 아닌 것"에서 아름다움을 느끼는 능력 — 그게 당신의 초능력이에요.\n\n주 기능인 내향 감정(Fi)은 깊고 풍부한 내면 세계를 만들어냅니다. 자신만의 확고한 가치관과 윤리 체계가 있고, 그것에 어긋나는 것은 절대 용납하지 않죠. 보조 기능인 외향 직관(Ne)이 여기에 무한한 상상력과 가능성을 더해, 당신만의 독특한 세계관을 형성합니다.\n\n당신은 진정성을 최고의 가치로 여깁니다. 가식적인 것, 표면적인 것, 의미 없는 것은 견딜 수 없어요. 대신 진심이 느껴지는 것, 아름다운 것, 의미 있는 것에는 온 마음을 쏟습니다. 그래서 당신의 관계, 작품, 일에는 항상 진심이 담겨 있죠.\n\n하지만 열등 기능인 Te가 약하기 때문에, 감정과 이상을 현실적인 행동으로 옮기는 것이 어려울 수 있어요. 머릿속에서는 완벽한데 막상 실행하려면 막막하죠. "완벽하지 않아도 괜찮다"는 마음을 갖고, 작은 것부터 시작하는 연습이 당신에게 큰 변화를 가져올 거예요.',
    strengths: ['풍부한 감수성과 공감 능력', '깊은 내면의 가치관과 신념', '창작과 예술적 표현에 재능', '진정성 있는 인간관계를 형성하는 능력', '타인의 고통에 깊이 공감하는 따뜻함', '독특하고 창의적인 세계관'],
    weaknesses: ['현실과 이상의 괴리에 힘들어함', '비판에 예민하게 반응할 수 있음', '결정을 내리기까지 오래 걸림', '감정에 압도당해 논리적 판단이 흐려질 수 있음', '자기 표현에 어려움을 느낄 때가 있음', '완벽주의적 이상과 현실 사이에서 자책하기 쉬움'],
    careers: ['작가/시인', '그래픽 디자이너', '심리상담사', '음악가'],
    loveStyle: '이상적인 사랑을 꿈꿉니다. 상대의 내면에 깊이 빠져들고, 작은 배려와 진심에 감동받아요. 연애편지를 쓸 줄 아는 마지막 세대일지도 모릅니다.',
    funFact: '비 오는 날 창가 카페 → 감성 충전 완료. 플레이리스트에 "새벽감성" "혼자듣기좋은" 같은 플레이리스트가 5개 이상.',
    communicationStyle: '조용하고 사려 깊은 소통을 합니다. 말보다 글로 표현하는 것이 더 편하고, 대화할 때도 신중하게 단어를 고르죠. 피상적인 대화보다 깊고 의미 있는 대화를 선호하며, 상대의 이야기를 경청할 때 진가를 발휘합니다.',
    stressResponse: '스트레스를 받으면 자기 안으로 깊이 움츠러들고, 부정적 감정의 소용돌이에 빠집니다. 열등 기능인 Te가 부정적으로 발동하면 갑자기 비판적이고 공격적으로 변하거나, "나는 아무것도 제대로 못 해"라는 자기 비하에 빠질 수 있어요. 자연 속에서 시간을 보내거나 창작 활동에 몰입하는 것이 좋은 회복법입니다.',
    bestMatch: 'ENTJ 전략적 통솔자 ♟️',
    worstMatch: 'ESTJ 엄격한 관리자 📋'
  },
  ISTJ: {
    name: '현실주의자', emoji: '🏛️', mbtiCode: 'ISTJ',
    cognitiveStack: 'Si-Te-Fi-Ne',
    population: '11.6%',
    famousExamples: ['워런 버핏 (Warren Buffett)', '손흥민', '앙겔라 메르켈 (Angela Merkel)', '허마이오니 그레인저 (해리 포터)'],
    desc: '묵묵하고 성실한 신뢰의 아이콘',
    detail: '당신은 "약속은 지키는 것"이라는 신념의 소유자입니다. 말보다 행동이고, 행동보다 결과예요. 화려하지 않지만 꾸준하게, 조용하지만 확실하게 — 그래서 당신 주변 사람들은 "이 사람은 진짜야"라고 느낍니다.\n\n주 기능인 내향 감각(Si)은 과거의 경험과 사실을 정확하게 기억하고 활용합니다. "지난번에 이렇게 했더니 잘 됐으니, 이번에도 이 방법으로 하자" — 검증된 방법에 대한 신뢰가 당신의 강점이죠. 보조 기능인 외향 사고(Te)는 이 경험을 효율적으로 조직하고 실행합니다.\n\n당신은 조직의 기둥입니다. 전체 인구의 약 11.6%를 차지하는 ISTJ는 사회의 안정성을 유지하는 핵심 역할을 하죠. 세금 신고 기한을 놓친 적 없고, 보고서에 오탈자가 없으며, 약속 시간에 늦지 않습니다. 이런 꾸준한 신뢰성이 당신의 가장 큰 매력이에요.\n\n하지만 열등 기능인 Ne가 약하기 때문에, 새로운 가능성이나 변화를 받아들이는 것이 어려울 수 있어요. "원래 하던 대로"가 편하지만, 세상은 계속 변합니다. 가끔은 익숙함의 바깥으로 한 발 나가보는 것도 성장의 일부입니다.',
    strengths: ['높은 책임감과 성실함', '체계적이고 꼼꼼한 실행력', '신뢰할 수 있는 일관된 태도', '사실에 기반한 정확한 판단', '인내심이 강하고 끈기 있음', '세부 사항에 대한 뛰어난 주의력'],
    weaknesses: ['변화를 받아들이기 어려울 수 있음', '감정 표현이 서투름', '융통성이 부족하다는 인상을 줄 수 있음', '새로운 방법보다 기존 방식에 집착할 수 있음', '감정보다 사실을 우선시해 차갑게 보일 수 있음', '예상치 못한 상황에서 스트레스를 크게 받음'],
    careers: ['공인회계사', '법무사/법률 전문가', '공무원', '데이터 관리자'],
    loveStyle: '행동으로 사랑을 증명하는 타입. "사랑해"보다 "밥 먹었어?"가 더 자연스러운 사람. 안정적이고 예측 가능한 관계에서 편안함을 느껴요.',
    funFact: '약속 시간 15분 전에 도착해서 기다리는 사람. 택배 올 때까지 문 앞을 떠나지 않는 사람. 연차를 다 안 쓰고 남기는 사람.',
    communicationStyle: '간결하고 사실에 기반한 소통을 선호합니다. 불필요한 수식어 없이 핵심만 전달하고, 구체적인 사실과 데이터를 중시하죠. 감정적 표현보다는 실질적인 정보 전달에 초점을 맞추며, 한 번 한 말은 반드시 지킵니다.',
    stressResponse: '스트레스를 받으면 더욱 경직되고 완고해집니다. 이미 정해진 계획이나 규칙에 더 집착하고, 주변의 변화나 요청에 짜증을 내기 쉬워요. 극심한 스트레스에서는 열등 기능인 Ne가 발동하며 "최악의 시나리오"에 대한 불안에 사로잡히거나, 비현실적인 걱정을 반복할 수 있습니다.',
    bestMatch: 'ESFP 흥의 화신 🎉',
    worstMatch: 'ENTP 논쟁의 달인 💡'
  },
  ISTP: {
    name: '만능 장인', emoji: '🔧', mbtiCode: 'ISTP',
    cognitiveStack: 'Ti-Se-Ni-Fe',
    population: '5.4%',
    famousExamples: ['이소룡 (Bruce Lee)', '클린트 이스트우드 (Clint Eastwood)', '현빈', '레라 크로프트 (툼레이더)'],
    desc: '냉정한 분석과 손재주의 달인',
    detail: '당신은 문제가 생기면 불평 대신 도구를 집어드는 사람입니다. 조용히 관찰하고, 분석하고, 가장 효율적인 방법을 찾아 실행합니다. 위기 상황에서 가장 냉정한 사람이고, 그래서 가장 믿을 수 있는 사람이에요.\n\n주 기능인 내향 사고(Ti)는 사물의 원리를 파악하는 데 탁월합니다. "이게 왜 이렇게 작동하지?"라는 질문에서 시작해, 분해하고 이해하고 다시 조립하는 과정을 즐기죠. 보조 기능인 외향 감각(Se)이 여기에 탁월한 손재주와 현실 감각을 더합니다.\n\n당신은 "쿨한 해결사" 같은 존재예요. 다른 사람들이 당황하고 있을 때, 당신은 이미 상황을 분석하고 해결책을 실행하고 있죠. 불필요한 말이나 감정 표현 없이 딱 필요한 만큼만 행동합니다. 이 경제적인 행동 방식이 당신의 매력이에요.\n\n하지만 열등 기능인 Fe가 약하기 때문에, 감정을 표현하거나 타인의 감정에 반응하는 것이 어색할 수 있어요. 문제를 "고치는" 것은 잘하지만, 상대가 원하는 건 해결이 아니라 공감일 때가 있다는 걸 기억해주세요. 가끔은 "어떤 기분이야?"라고 물어보는 것만으로도 충분합니다.',
    strengths: ['뛰어난 문제 해결 능력', '위기 상황에서 냉정한 판단력', '실용적이고 효율적인 접근', '뛰어난 손재주와 기술적 능력', '독립적이고 자율적인 성향', '관찰력이 예리하고 상황 파악이 빠름'],
    weaknesses: ['감정 표현에 인색할 수 있음', '장기적 약속을 부담스러워함', '규칙과 관습에 반발하는 경향', '감정적 대화를 회피하는 경향', '타인에게 무관심해 보일 수 있음', '반복적이고 구조화된 환경을 답답해함'],
    careers: ['엔지니어', '파일럿/항공 기술자', '응급 구조사', '포렌식 분석가'],
    loveStyle: '말보다 행동으로 보여주는 스타일. 고장난 거 고쳐주고, 필요한 거 미리 챙기는 게 당신의 사랑 표현. 과도한 감정 표현은 부담스럽지만, 진심은 확실합니다.',
    funFact: '집에 공구 세트가 있고, 뭔가 고장나면 일단 분해부터 하는 사람. 유튜브에서 DIY 영상을 "그냥 심심해서" 본다고 하지만 사실 꽤 진심.',
    communicationStyle: '말수가 적고 필요한 것만 말하는 스타일입니다. 감정적인 수식어 없이 사실 그대로를 전달하며, 장황한 설명보다 간결한 한마디를 선호하죠. "보여주는 게 빠르다"며 직접 시범을 보이는 것이 당신만의 소통 방식입니다.',
    stressResponse: '스트레스를 받으면 더욱 냉담해지고 주변과의 소통을 끊습니다. 극심한 스트레스에서는 열등 기능인 Fe가 폭발하며 갑자기 감정적으로 변하거나, 주변 사람들에게 서운함을 터뜨리기도 해요. 혼자서 손으로 무언가를 만들거나 고치는 활동이 좋은 스트레스 해소법입니다.',
    bestMatch: 'ENFJ 정의의 사도 🌟',
    worstMatch: 'ESFJ 따뜻한 돌봄이 🤗'
  },
  ISFJ: {
    name: '조용한 수호자', emoji: '🛡️', mbtiCode: 'ISFJ',
    cognitiveStack: 'Si-Fe-Ti-Ne',
    population: '13.8%',
    famousExamples: ['마더 테레사 (Mother Teresa)', '비욘세 (Beyoncé)', '유퀴즈 조세호', '캡틴 아메리카 (스티브 로저스)'],
    desc: '헌신적으로 주변을 지키는 따뜻한 사람',
    detail: '당신은 사람의 마음에 와이파이가 연결된 사람입니다. 친구가 "나 괜찮아"라고 말해도 목소리 떨림 0.5초만에 "아닌 거 다 아는데?"라고 할 수 있죠. 많은 말이 필요 없는 위로를 할 줄 아는 사람. 당신이 옆에 앉아서 조용히 같이 있어주는 것만으로도 상대방은 울컥합니다.\n\n주 기능인 내향 감각(Si)은 과거의 경험과 디테일을 정확하게 기억합니다. "작년 이맘때 네가 이런 말 했었잖아"라며 상대도 잊은 것을 기억해주는 게 바로 당신이죠. 보조 기능인 외향 감정(Fe)이 여기에 깊은 공감과 배려를 더해, 따뜻하면서도 실질적인 돌봄을 제공합니다.\n\n전체 인구의 약 13.8%로 가장 많은 비율을 차지하는 ISFJ는 사회의 조용한 영웅입니다. 가정에서, 직장에서, 커뮤니티에서 보이지 않는 곳에서 묵묵히 사람들을 돌보고 지탱하죠. 당신의 헌신 덕분에 유지되는 것들이 얼마나 많은지, 사람들은 모르는 경우가 많아요.\n\n하지만 남을 돌보느라 자기 자신을 돌보지 않는 것이 가장 큰 약점입니다. 열등 기능인 Ne가 약하기 때문에, 변화나 불확실한 상황에서 큰 불안을 느낄 수 있어요. "다른 사람의 감정을 너무 흡수하면 자기 감정이 고갈된다"는 것을 꼭 기억해주세요.',
    strengths: ['세심한 배려와 관찰력', '맡은 일에 대한 끈기와 성실함', '조용하지만 강한 공감 능력', '신뢰할 수 있는 일관된 모습', '디테일한 기억력과 실용적 배려', '조화로운 환경을 만들어내는 능력'],
    weaknesses: ['거절하기 어려워 무리하게 됨', '변화보다 안정을 과도하게 추구', '자기 감정을 뒤로 미루는 습관', '타인의 기대에 부응하려 자기를 잃을 수 있음', '비판에 상처를 깊이 받지만 표현하지 않음', '과거의 부정적 경험에 오래 사로잡히는 경향'],
    careers: ['간호사/돌봄 전문가', '사서/아카이비스트', '행정 전문가', '초등교사'],
    loveStyle: '조용히, 꾸준히, 진심으로. 상대의 작은 습관까지 기억하고 챙겨주는 타입. 화려한 표현보다 따뜻한 일상의 배려가 당신의 사랑 방식이에요.',
    funFact: '친구들의 고민 상담 1순위. "너한테만 말하는 건데..." 를 가장 많이 듣는 사람. 남의 고민을 들으면서 같이 우는 경우 종종 있음.',
    communicationStyle: '조용하고 따뜻한 소통 스타일입니다. 목소리 톤이 부드럽고, 상대의 이야기를 진심으로 경청하죠. 직접적으로 자기 의견을 내세우기보다 상대가 편안하게 이야기할 수 있도록 분위기를 만들어주며, 필요할 때 조심스럽게 조언합니다.',
    stressResponse: '스트레스를 받으면 더욱 자기를 희생하며 남을 돌보려 하고, 이것이 결국 감정적 폭발로 이어질 수 있습니다. 열등 기능인 Ne가 부정적으로 발동하면 "최악의 시나리오"를 상상하며 불안에 빠지기도 해요. 평소 자기 감정을 작은 것부터 표현하는 연습이 큰 폭발을 예방하는 핵심입니다.',
    bestMatch: 'ESTP 타고난 모험가 🏄',
    worstMatch: 'ENTP 논쟁의 달인 💡'
  },
  ISFP: {
    name: '호기심 많은 예술가', emoji: '🎨', mbtiCode: 'ISFP',
    cognitiveStack: 'Fi-Se-Ni-Te',
    population: '8.8%',
    famousExamples: ['밥 로스 (Bob Ross)', '지드래곤 (G-Dragon)', '라이언 고슬링 (Ryan Gosling)', '프로도 배긴스 (반지의 제왕)'],
    desc: '감각적이고 자유로운 탐험가',
    detail: '당신은 세상을 남들과 다른 눈으로 봅니다. 같은 노을을 봐도, 같은 음악을 들어도, 당신이 느끼는 건 남들보다 한 차원 깊어요. 그 감각을 말이 아닌 행동과 작품으로 표현하는 사람. 조용하지만 당신의 존재 자체가 하나의 예술입니다.\n\n주 기능인 내향 감정(Fi)은 깊고 풍부한 감정 세계를 형성합니다. 자신만의 확고한 미적 기준과 가치관이 있고, 그것에 충실하게 살아가죠. 보조 기능인 외향 감각(Se)이 이 내면의 세계를 현실에서 직접 경험하고 표현하는 수단이 됩니다.\n\n당신은 "말하는" 사람이 아니라 "보여주는" 사람입니다. 사진 한 장, 요리 한 접시, 선물 하나에 담긴 당신의 마음은 말 천마디보다 깊은 울림이 있어요. 자유로운 영혼이지만 동시에 자기만의 원칙이 있고, 그 원칙은 조용히 지킵니다.\n\n하지만 열등 기능인 Te가 약하기 때문에, 체계적인 계획이나 목표 설정이 어려울 수 있어요. "느끼는 대로" 사는 것이 아름답지만, 때로는 현실적인 구조와 계획이 당신의 예술을 지탱하는 토대가 됩니다. 자기 재능의 가치를 과소평가하지 말고, 세상에 더 많이 보여주세요.',
    strengths: ['뛰어난 미적 감각과 감수성', '현재를 깊이 느끼고 즐기는 능력', '겸손하고 따뜻한 성품', '자유롭고 유연한 적응력', '행동으로 진심을 표현하는 진정성', '감각적 경험에 대한 탁월한 감수성'],
    weaknesses: ['갈등 상황을 회피하는 경향', '장기적 목표 설정이 어려울 수 있음', '자기 가치를 과소평가하기 쉬움', '체계적인 계획 수립이 어려움', '비판에 깊이 상처받지만 표현하지 않음', '감정이 격해지면 논리적 소통이 어려워짐'],
    careers: ['사진작가', '플로리스트', '인테리어 디자이너', '셰프/파티시에'],
    loveStyle: '말보다 감각으로 사랑하는 타입. 손 잡아주기, 좋아하는 노래 공유, 함께 산책하기 — 소소하지만 깊은 교감을 중요시해요.',
    funFact: '카페에서 인테리어를 무의식적으로 평가하는 사람. 사진첩에 일상의 아름다운 순간들이 가득. "그냥 예뻐서 찍었어"라고 하지만, 그 구도는 프로급.',
    communicationStyle: '말수가 적고 조용한 소통 스타일이지만, 행동과 표현으로 많은 것을 전달합니다. 감정적으로 민감한 주제에서는 말보다 눈빛이나 분위기로 소통하며, 편안한 관계에서는 의외로 유머 감각이 뛰어나요. 자기 감정을 말로 표현하는 것보다 창작물로 전달하는 것이 더 자연스럽습니다.',
    stressResponse: '스트레스를 받으면 세상과의 접촉을 줄이고 혼자만의 공간으로 후퇴합니다. 열등 기능인 Te가 부정적으로 발동하면 갑자기 비판적이고 냉소적으로 변하거나, 자신과 타인에게 지나치게 엄격해질 수 있어요. 자연 속에서 시간을 보내거나 좋아하는 예술 활동에 몰입하는 것이 회복에 효과적입니다.',
    bestMatch: 'ESTJ 엄격한 관리자 📋',
    worstMatch: 'ENTJ 전략적 통솔자 ♟️'
  }
};

/**
 * 메인 분석 함수
 * @param {Object} selfCheckAnswers - 셀프체크 답변
 * @param {Object} followupAnswers - 꼬리질문 답변
 * @returns {Object} 분석 결과
 */
function analyzePersonality(selfCheckAnswers, followupAnswers) {
  // 1. 셀프체크 기본 점수 (4축)
  const selfResult = calculateSelfType(selfCheckAnswers);

  // 2. 꼬리질문 점수 반영
  let followupThinking = 0;
  let followupEnergy = 0;
  let followupSensing = 0;
  let followupJudging = 0;

  if (followupAnswers) {
    for (const [key, ans] of Object.entries(followupAnswers)) {
      if (ans.axis === 'thinking') followupThinking += ans.score;
      else if (ans.axis === 'energy') followupEnergy += ans.score;
      else if (ans.axis === 'sensing') followupSensing += ans.score;
      else if (ans.axis === 'judging') followupJudging += ans.score;
    }
  }

  // 3. 최종 점수 계산: 셀프체크 85% + 꼬리질문 15%
  let thinkingFinal = selfResult.thinkingScore * 0.85 + Math.max(-100, Math.min(100, followupThinking)) * 0.15;
  let energyFinal = selfResult.energyScore * 0.85 + Math.max(-100, Math.min(100, followupEnergy)) * 0.15;
  let sensingFinal = selfResult.sensingScore * 0.85 + Math.max(-100, Math.min(100, followupSensing)) * 0.15;
  let judgingFinal = selfResult.judgingScore * 0.85 + Math.max(-100, Math.min(100, followupJudging)) * 0.15;

  thinkingFinal = Math.max(-100, Math.min(100, thinkingFinal));
  energyFinal = Math.max(-100, Math.min(100, energyFinal));
  sensingFinal = Math.max(-100, Math.min(100, sensingFinal));
  judgingFinal = Math.max(-100, Math.min(100, judgingFinal));

  // 4. 4글자 MBTI 코드 결정
  const e_i = energyFinal >= 0 ? 'E' : 'I';
  const s_n = sensingFinal >= 0 ? 'S' : 'N';
  const t_f = thinkingFinal >= 0 ? 'T' : 'F';
  const j_p = judgingFinal >= 0 ? 'J' : 'P';
  const finalType = e_i + s_n + t_f + j_p;

  // 5. 감정 DNA 계산 (셀프체크 기반)
  const dna = calculateDNAFromAnswers(selfCheckAnswers);

  // 6. 셀프 갭 계산 (4글자 비교)
  const selfType = selfResult.selfType;
  const gapLevel = calculateGap(selfType, finalType);

  return {
    finalType,
    typeInfo: TYPE_INFO[finalType],
    selfType,
    selfTypeInfo: TYPE_INFO[selfType] || TYPE_INFO.ENTJ,
    thinkingScore: Math.round(thinkingFinal),
    energyScore: Math.round(energyFinal),
    sensingScore: Math.round(sensingFinal),
    judgingScore: Math.round(judgingFinal),
    mbtiCode: finalType,
    dna,
    gapLevel,
    mainKeyword: '분석',
    textStats: { exclamationCount: 0, questionCount: 0, emojiCount: 0, charCount: 0, sentenceCount: 0 }
  };
}

/**
 * 셀프체크 응답 기반 감정 DNA 계산 (상위 3개 반환)
 */
function calculateDNAFromAnswers(selfCheckAnswers) {
  // 응답 패턴에서 DNA 추출
  const dnaScores = {
    호기심: 0, 따뜻함: 0, 열정: 0, 차분함: 0, 유머: 0, 감성: 0
  };

  // 응답 매핑: 특정 선택이 DNA에 기여
  const dnaMapping = {
    movie: { thriller: '호기심', romance: '감성', docu: '호기심', comedy: '유머' },
    weekend: { social: '열정', solo: '차분함', small: '따뜻함', explore: '호기심' },
    stress: { alone: '차분함', talk: '따뜻함', action: '열정', avoid: '유머' },
    compliment: { smart: '호기심', comfort: '따뜻함', fun: '유머', trust: '차분함' },
    energy: { party: '열정', alone: '차분함', deep: '감성', newpeople: '호기심' },
    tired: { rest: '차분함', call: '따뜻함', walk: '감성', cafe: '유머' },
    conflict: { persuade: '열정', empathy: '따뜻함', yield: '차분함', accept: '감성' },
    advice: { solve: '호기심', listen: '감성', comfort: '따뜻함', share: '열정' }
  };

  for (const [qId, mapping] of Object.entries(dnaMapping)) {
    const answer = selfCheckAnswers[qId];
    if (answer && mapping[answer]) {
      dnaScores[mapping[answer]] += 15 + Math.floor(Math.random() * 10);
    }
  }

  // 기본값 보장
  for (const key of Object.keys(dnaScores)) {
    if (dnaScores[key] === 0) {
      dnaScores[key] = 10 + Math.floor(Math.random() * 15);
    }
  }

  const dnaList = Object.entries(dnaScores).map(([name, score]) => ({ name, score }));
  const maxScore = Math.max(...dnaList.map(d => d.score));
  const scaled = dnaList.map(d => ({
    ...d,
    score: Math.max(25, Math.min(95, Math.round((d.score / (maxScore || 1)) * 85 + 10)))
  }));

  return scaled.sort((a, b) => b.score - a.score).slice(0, 3);
}

/**
 * 셀프 갭 레벨 계산 (4글자 MBTI 비교)
 */
function calculateGap(selfType, finalType) {
  if (selfType === finalType) return 'match';

  let diff = 0;
  for (let i = 0; i < 4; i++) {
    if (selfType[i] !== finalType[i]) diff++;
  }

  if (diff === 1) return 'slight';
  return 'big'; // 2개 이상 다르면 big
}

/**
 * MBTI 코드에서 패밀리 그룹 반환 (대사 시스템용)
 */
function getMBTIFamily(mbtiCode) {
  const middle = mbtiCode.substring(1, 3); // S/N + T/F
  if (middle === 'NT') return 'NT';
  if (middle === 'NF') return 'NF';
  if (middle === 'ST') return 'ST';
  if (middle === 'SF') return 'SF';
  return 'NT'; // fallback
}
